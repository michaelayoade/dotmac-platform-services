# =============================================================================
# LOCAL DEVELOPMENT ENVIRONMENT - Copy to .env for local development
# =============================================================================
# This configuration is for running the backend directly on your host machine
# (macOS, Linux, Windows) using poetry/uvicorn outside of Docker
#
# For Docker Compose deployment on servers, use .env.server instead
#
# Quick Start:
#   1. cp .env.local.example .env
#   2. Start infrastructure: make start-infra
#   3. Run backend: poetry run uvicorn dotmac.platform.main:app --reload
# =============================================================================

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=debug

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Use localhost when running backend on host (not in Docker)
DATABASE__HOST=localhost
DATABASE__PORT=5432
DATABASE__DATABASE=dotmac
DATABASE__USERNAME=dotmac_user
DATABASE__PASSWORD=dev_local_pg_password_123

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Use localhost when running backend on host (not in Docker)
REDIS__HOST=localhost
REDIS__PORT=6379
REDIS__DB=0

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Use localhost endpoint and relative path for local development
STORAGE__ENDPOINT=http://localhost:9000
STORAGE__ACCESS_KEY=minioadmin
STORAGE__SECRET_KEY=dev_local_minio_root_pw
STORAGE__BUCKET=dotmac
STORAGE__USE_SSL=false
# Relative path works on macOS, Linux, and Windows without sudo
STORAGE__LOCAL_PATH=./.local/storage

# =============================================================================
# VAULT CONFIGURATION (Optional - disabled by default)
# =============================================================================
VAULT__ENABLED=false
VAULT__URL=http://localhost:8200
VAULT__TOKEN=dev-token-12345

# =============================================================================
# SECURITY SECRETS
# =============================================================================
# IMPORTANT: Change these in production!
SECRET_KEY=dev-secret-change-me-in-production-use-openssl-rand-hex-32
AUTH__JWT_SECRET_KEY=dev-jwt-secret-change-me-in-production-use-openssl-rand-hex-32

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================
CELERY__BROKER_URL=redis://localhost:6379/2
CELERY__RESULT_BACKEND=redis://localhost:6379/3

# =============================================================================
# TELEMETRY / OBSERVABILITY
# =============================================================================
# Use localhost when running backend on host (not in Docker)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=dotmac-platform

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
REQUIRE_REDIS_SESSIONS=false

# =============================================================================
# NOTES FOR LOCAL DEVELOPMENT
# =============================================================================
# 1. This file uses localhost for all service endpoints (not container names)
# 2. Storage path is relative (./.local/storage) to work without sudo
# 3. Infrastructure must be running: make start-infra
# 4. This config is for host-based development, not Docker Compose
# 5. For server deployment, use .env.server instead
# =============================================================================
