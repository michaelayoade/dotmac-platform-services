# =============================================================================
# Testing Environment Configuration
# =============================================================================
#
# This file contains environment variables for running tests.
#
# Usage:
#   1. Copy this file: cp .env.testing.example .env.testing
#   2. Load before running tests: source .env.testing
#   3. Or use the run-integration-tests.sh script (handles this automatically)
#
# IMPORTANT:
#   - DO NOT set NETBOX_URL, VAULT_URL when running tests from host machine
#   - Auto-detection will use localhost URLs automatically
#   - Only set these when running tests inside Docker containers
#

# =============================================================================
# Test Database Configuration
# =============================================================================
TEST_DATABASE_URL=sqlite+aiosqlite:///./test.db
DATABASE_URL=sqlite+aiosqlite:///./test.db
DATABASE__HOST=localhost
DATABASE__PORT=5432
DATABASE__DATABASE=dotmac_test
DATABASE__USERNAME=dotmac_user
DATABASE__PASSWORD=testing-password

# =============================================================================
# Redis Configuration (for test isolation)
# =============================================================================
REDIS__HOST=localhost
REDIS__PORT=6379
REDIS__DB=15
REDIS__PASSWORD=
REDIS_URL=redis://localhost:6379/15
REQUIRE_REDIS_SESSIONS=false

# =============================================================================
# Infrastructure Service Configuration
# =============================================================================
# Leave these UNSET to enable auto-detection:
#   - Outside Docker: Uses localhost:PORT
#   - Inside Docker: Uses service-name:PORT
#
# Only uncomment if you need to override auto-detection:

# NetBox - IPAM/DCIM
# NETBOX_URL=http://localhost:8080              # When running from host
# NETBOX_URL=http://netbox:8080                 # When running in Docker
NETBOX_API_TOKEN=0123456789abcdef0123456789abcdef01234567

# Vault/OpenBao - Secrets Management
# VAULT_URL=http://localhost:8200               # When running from host
# VAULT_URL=http://vault:8200                   # When running in Docker
VAULT_TOKEN=dev-token-12345
VAULT__ENABLED=false
VAULT__URL=http://localhost:8200

# FreeRADIUS
# FREERADIUS_HOST=localhost                     # When running from host
# FREERADIUS_HOST=freeradius                    # When running in Docker
FREERADIUS_AUTH_PORT=1812
FREERADIUS_SHARED_SECRET=testing123

# =============================================================================
# Test Execution Flags
# =============================================================================
# Enable Vault E2E tests (requires Docker)
RUN_VAULT_E2E=0

# Enable slow/integration tests
RUN_INTEGRATION_TESTS=1

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=ERROR
PYTHONDONTWRITEBYTECODE=1
