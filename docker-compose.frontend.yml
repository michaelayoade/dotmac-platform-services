services:
  platform-frontend:
    build:
      context: .
      dockerfile: frontend/Dockerfile
      args:
        NEXT_PUBLIC_API_URL: http://149.102.158.144:8000
        NEXT_PUBLIC_API_BASE_URL: http://149.102.158.144:8000
        NEXT_PUBLIC_WS_URL: ws://149.102.158.144:8000
        NEXTAUTH_SECRET: dev-nextauth-secret-change-me-min-32-chars
        NEXTAUTH_URL: http://149.102.158.144:3000
        API_URL: http://dotmac-backend:8000
    container_name: dotmac-frontend
    restart: unless-stopped
    environment:
      NODE_ENV: production
      NEXT_PUBLIC_API_URL: http://149.102.158.144:8000
      NEXT_PUBLIC_API_BASE_URL: http://149.102.158.144:8000
      API_URL: http://dotmac-backend:8000
      NEXT_PUBLIC_WS_URL: ws://149.102.158.144:8000
      NEXTAUTH_SECRET: dev-nextauth-secret-change-me-min-32-chars
      NEXTAUTH_URL: http://149.102.158.144:3000
    ports:
      - "3000:3000"
    networks:
      - dotmac-network

networks:
  dotmac-network:
    external: true
